# Use the official Eclipse Temurin JDK 21 base image
FROM eclipse-temurin:21-jdk

# Set the working directory inside the container
WORKDIR /app

# Copy the local project files into the container
COPY . /app

# Copy the JavaFX SDK files into the container (ensure the correct directory)
COPY javafx-sdk-23.0.1 /app/javafx-sdk-23.0.1

# Set the JAVA_HOME environment variable to point to the JDK inside the container
ENV JAVA_HOME=/opt/java/openjdk
ENV PATH=$JAVA_HOME/bin:$PATH

# Install Maven and other necessary dependencies, including X11 libraries for JavaFX
RUN apt-get update && \
    apt-get install -y maven wget libx11-dev libgtk-3-dev libgl1 libxi6 libxrender-dev x11-apps

# Build the project using Maven
RUN mvn clean install

# Set the entry point to run the application using the javafx-maven-plugin
ENTRYPOINT ["mvn", "javafx:run"]
